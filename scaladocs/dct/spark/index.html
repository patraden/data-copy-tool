<!DOCTYPE html ><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/><title>data-copy-tool documentation  - dct.spark</title><meta content="data - copy - tool documentation - dct.spark" name="description"/><meta content="data copy tool documentation dct.spark" name="keywords"/><meta http-equiv="content-type" content="text/html; charset=UTF-8"/><link href="../../lib/index.css" media="screen" type="text/css" rel="stylesheet"/><link href="../../lib/template.css" media="screen" type="text/css" rel="stylesheet"/><link href="../../lib/print.css" media="print" type="text/css" rel="stylesheet"/><link href="../../lib/diagrams.css" media="screen" type="text/css" rel="stylesheet" id="diagrams-css"/><script type="text/javascript" src="../../lib/jquery.min.js"></script><script type="text/javascript" src="../../lib/index.js"></script><script type="text/javascript" src="../../index.js"></script><script type="text/javascript" src="../../lib/scheduler.js"></script><script type="text/javascript" src="../../lib/template.js"></script><script type="text/javascript">/* this variable can be used by the JS to determine the path to the root document */
var toRoot = '../../';</script></head><body><div id="search"><span id="doc-title">data-copy-tool documentation<span id="doc-version"></span></span> <span class="close-results"><span class="left">&lt;</span> Back</span><div id="textfilter"><span class="input"><input autocapitalize="none" placeholder="Search" id="index-input" type="text" accesskey="/"/><i class="clear material-icons"></i><i id="search-icon" class="material-icons"></i></span></div></div><div id="search-results"><div id="search-progress"><div id="progress-fill"></div></div><div id="results-content"><div id="entity-results"></div><div id="member-results"></div></div></div><div id="content-scroll-container" style="-webkit-overflow-scrolling: touch;"><div id="content-container" style="-webkit-overflow-scrolling: touch;"><div id="subpackage-spacer"><div id="packages"><h1>Packages</h1><ul><li class="indented0 " name="_root_.root" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="_root_" class="anchorToMember"></a><a id="root:_root_" class="anchorToMember"></a> <span class="permalink"><a href="../../index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../index.html" title=""><span class="name">root</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../index.html" name="_root_" id="_root_" class="extype">root</a></dd></dl></div></li><li class="indented1 " name="_root_.dct" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="dct" class="anchorToMember"></a><a id="dct:dct" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../index.html" title=""><span class="name">dct</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../index.html" name="_root_" id="_root_" class="extype">root</a></dd></dl></div></li><li class="indented2 " name="dct.akkastreams" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="akkastreams" class="anchorToMember"></a><a id="akkastreams:akkastreams" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/akkastreams/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../akkastreams/index.html" title=""><span class="name">akkastreams</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../index.html" name="dct" id="dct" class="extype">dct</a></dd></dl></div></li><li class="indented2 " name="dct.json" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="json" class="anchorToMember"></a><a id="json:json" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/json/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../json/index.html" title=""><span class="name">json</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../index.html" name="dct" id="dct" class="extype">dct</a></dd></dl></div></li><li class="indented2 " name="dct.slick" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="slick" class="anchorToMember"></a><a id="slick:slick" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/slick/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../slick/index.html" title=""><span class="name">slick</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../index.html" name="dct" id="dct" class="extype">dct</a></dd></dl></div></li><li class="indented2 current" name="dct.spark" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="spark" class="anchorToMember"></a><a id="spark:spark" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/spark/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><span class="name">spark</span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../index.html" name="dct" id="dct" class="extype">dct</a></dd></dl></div></li><li class="current-entities indented2"><span class="separator"></span> <a href="package$$Logger.html" title="Spark utility trait for classes that want to log data." class="trait"></a><a href="package$$Logger.html" title="Spark utility trait for classes that want to log data.">Logger</a></li><li class="current-entities indented2"><span class="separator"></span> <a href="SparkPGSQLUtils$.html" title="Postgres SQl utility methods to create, alter and drop objects in database." class="object"></a><a href="SparkPGSQLUtils$.html" title="Postgres SQl utility methods to create, alter and drop objects in database.">SparkPGSQLUtils</a></li><li class="current-entities indented2"><span class="separator"></span> <a href="SparkParquetTable.html" title="Parquet read support class as extension of standard ParquetTable." class="class"></a><a href="SparkParquetTable.html" title="Parquet read support class as extension of standard ParquetTable.">SparkParquetTable</a></li><li class="current-entities indented2"><span class="separator"></span> <a href="SparkPartitionReader.html" title="Wrapper for spark PartitionReader which returns Row instead of InternalRow." class="class"></a><a href="SparkPartitionReader.html" title="Wrapper for spark PartitionReader which returns Row instead of InternalRow.">SparkPartitionReader</a></li><li class="current-entities indented2"><span class="separator"></span> <a href="package$$StructTypeExtra.html" title="Compares two StructTypes in terms of name, datatype and nullable flags equality." class="class"></a><a href="package$$StructTypeExtra.html" title="Compares two StructTypes in terms of name, datatype and nullable flags equality.">StructTypeExtra</a></li></ul></div></div><div id="content"><body class="package value"><div id="definition"><div class="big-circle package">p</div><p id="owner"><a href="../index.html" name="dct" id="dct" class="extype">dct</a></p><h1>spark<span class="permalink"><a href="../../dct/spark/index.html" title="Permalink"><i class="material-icons"></i></a></span></h1></div><h4 id="signature" class="signature"><span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><span class="name">spark</span></span></h4><div id="comment" class="fullcommenttop"><div class="toggleContainer"><div class="toggle block"><span>Linear Supertypes</span><div class="superTypes hiddenContent"><span name="scala.AnyRef" class="extype">AnyRef</span>, <span name="scala.Any" class="extype">Any</span></div></div></div></div><div id="mbrsel"><div class="toggle"></div><div id="memberfilter"><i class="material-icons arrow"></i><span class="input"><input placeholder="Filter all members" id="mbrsel-input" type="text" accesskey="/"/></span><i class="clear material-icons"></i></div><div id="filterby"><div id="order"><span class="filtertype">Ordering</span><ol><li class="alpha in"><span>Alphabetic</span></li><li class="inherit out"><span>By Inheritance</span></li></ol></div><div class="ancestors"><span class="filtertype">Inherited<br/></span><ol id="linearization"><li class="in" name="dct.spark"><span>spark</span></li><li class="in" name="scala.AnyRef"><span>AnyRef</span></li><li class="in" name="scala.Any"><span>Any</span></li></ol></div><div class="ancestors"><span class="filtertype"></span><ol><li class="hideall out"><span>Hide All</span></li><li class="showall in"><span>Show All</span></li></ol></div><div id="visbl"><span class="filtertype">Visibility</span><ol><li class="public in"><span>Public</span></li><li class="protected out"><span>Protected</span></li></ol></div></div></div><div id="template"><div id="allMembers"><div id="types" class="types members"><h3>Type Members</h3><ol><li class="indented0 " name="dct.spark.Logger" group="Ungrouped" fullComment="yes" data-isabs="true" visbl="pub"><a id="LoggerextendsLogging" class="anchorToMember"></a><a id="Logger:Logger" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/spark/package$$Logger.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">trait</span></span> <span class="symbol"><a href="package$$Logger.html" title="Spark utility trait for classes that want to log data."><span class="name">Logger</span></a><span class="result"> extends <span name="org.apache.spark.internal.Logging" class="extype">Logging</span></span></span><p class="shortcomment cmt">Spark utility trait for classes that want to log data.</p><div class="fullcomment"><div class="comment cmt"><p>Spark utility trait for classes that want to log data. Creates a SLF4J logger for the class and allows
logging messages at different levels using methods that only evaluate parameters lazily if the
log level is enabled.
</p></div></div></li><li class="indented0 " name="dct.spark.SparkParquetTable" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="SparkParquetTableextendsParquetTable" class="anchorToMember"></a><a id="SparkParquetTable:SparkParquetTable" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/spark/SparkParquetTable.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">class</span></span> <span class="symbol"><a href="SparkParquetTable.html" title="Parquet read support class as extension of standard ParquetTable."><span class="name">SparkParquetTable</span></a><span class="result"> extends <span name="org.apache.spark.sql.execution.datasources.v2.parquet.ParquetTable" class="extype">ParquetTable</span></span></span><p class="shortcomment cmt">Parquet read support class as extension of standard <span name="ParquetTable" class="extype">ParquetTable</span>.</p><div class="fullcomment"><div class="comment cmt"><p>Parquet read support class as extension of standard <span name="ParquetTable" class="extype">ParquetTable</span>.
Allows to get full parquet schema as <span name="StructType" class="extype">StructType</span> including partitioning.
Besides provides useful methods to split parquet files equally
and read them in parallel via spark <span name="PartitionReader" class="extype">PartitionReader</span></p></div></div></li><li class="indented0 " name="dct.spark.SparkPartitionReader" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="SparkPartitionReaderextendsCloseable" class="anchorToMember"></a><a id="SparkPartitionReader:SparkPartitionReader" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/spark/SparkPartitionReader.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">class</span></span> <span class="symbol"><a href="SparkPartitionReader.html" title="Wrapper for spark PartitionReader which returns Row instead of InternalRow."><span class="name">SparkPartitionReader</span></a><span class="result"> extends <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html#java.io.Closeable" name="java.io.Closeable" id="java.io.Closeable" class="extype">Closeable</a></span></span><p class="shortcomment cmt">Wrapper for spark <span name="PartitionReader" class="extype">PartitionReader</span> which returns <span name="Row" class="extype">Row</span> instead of <span name="InternalRow" class="extype">InternalRow</span>.</p></li><li class="indented0 " name="dct.spark.StructTypeExtra" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="StructTypeExtraextendsAnyRef" class="anchorToMember"></a><a id="StructTypeExtra:StructTypeExtra" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/spark/package$$StructTypeExtra.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">implicit </span> <span class="kind">class</span></span> <span class="symbol"><a href="package$$StructTypeExtra.html" title="Compares two StructTypes in terms of name, datatype and nullable flags equality."><span class="name">StructTypeExtra</span></a><span class="result"> extends <span name="scala.AnyRef" class="extype">AnyRef</span></span></span><p class="shortcomment cmt">Compares two StructTypes in terms of name, datatype and nullable flags equality.</p><div class="fullcomment"><div class="comment cmt"><p>Compares two StructTypes in terms of name, datatype and nullable flags equality.
Standard <span name="StructType.equals()" class="extype">StructType.equals()</span> does not work as it also compares metadata.
</p></div></div></li></ol></div><div class="values members"><h3>Value Members</h3><ol><li class="indented0 " name="dct.spark#MazParquetReadParallelism" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="MazParquetReadParallelism:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/spark/index.html#MazParquetReadParallelism:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">MazParquetReadParallelism</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span><p class="shortcomment cmt">Parquet read parallelism restricts concurrent parquet row groups load into memory (heap).</p><div class="fullcomment"><div class="comment cmt"><p>Parquet read parallelism restricts concurrent parquet row groups load into memory (heap).
Thus this parameter should be adjusted inline with available heap size.
Assuming that parquet.block.size has it is default value of 256Mb the total heap size dedicated to
Data Copy Tool should be determined throw this approximate formula:
Max heap size (-Xmx) = (256Mb * MAX_PARQUET_READ_PARALLELISM) * 1.2
</p></div></div></li><li class="indented0 " name="dct.spark#appConfig" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="appConfig:com.typesafe.config.Config" class="anchorToMember"></a><a id="appConfig:Config" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/spark/index.html#appConfig:com.typesafe.config.Config" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">appConfig</span><span class="result">: <span name="com.typesafe.config.Config" class="extype">Config</span></span></span><p class="shortcomment cmt">application.conf from dct package.</p></li><li class="indented0 " name="dct.spark#hadoopDirExists" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="hadoopDirExists(path:String):Boolean" class="anchorToMember"></a><a id="hadoopDirExists(String):Boolean" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/spark/index.html#hadoopDirExists(path:String):Boolean" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">hadoopDirExists</span><span class="params">(<span name="path">path: <span name="scala.Predef.String" class="extype">String</span></span>)</span><span class="result">: <span name="scala.Boolean" class="extype">Boolean</span></span></span><p class="shortcomment cmt">Hadoop file/dir resource existence validator.</p><div class="fullcomment"><div class="comment cmt"><p>Hadoop file/dir resource existence validator.</p></div><dl class="paramcmts block"><dt class="param">path</dt><dd class="cmt"><p>hadoop file/dir path.</p></dd></dl></div></li><li class="indented0 " name="dct.spark#spark" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="spark:org.apache.spark.sql.SparkSession" class="anchorToMember"></a><a id="spark:SparkSession" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/spark/index.html#spark:org.apache.spark.sql.SparkSession" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">lazy val</span></span> <span class="symbol"><span class="name">spark</span><span class="result">: <span name="org.apache.spark.sql.SparkSession" class="extype">SparkSession</span></span></span></li><li class="indented0 " name="dct.spark#sparkConf" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="sparkConf:org.apache.spark.SparkConf" class="anchorToMember"></a><a id="sparkConf:SparkConf" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/spark/index.html#sparkConf:org.apache.spark.SparkConf" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">sparkConf</span><span class="result">: <span name="org.apache.spark.SparkConf" class="extype">SparkConf</span></span></span><p class="shortcomment cmt">Spark configuration with minimal settings as
dct does not use spark cluster but re-uses some of spark internal classes and objects.</p></li><li class="indented0 " name="dct.spark#sparkSchemaOrdering" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="sparkSchemaOrdering:Ordering[org.apache.spark.sql.types.StructField]" class="anchorToMember"></a><a id="sparkSchemaOrdering:Ordering[StructField]" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/spark/index.html#sparkSchemaOrdering:Ordering[org.apache.spark.sql.types.StructField]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">implicit </span> <span class="kind">val</span></span> <span class="symbol"><span class="name">sparkSchemaOrdering</span><span class="result">: <span name="scala.Ordering" class="extype">Ordering</span>[<span name="org.apache.spark.sql.types.StructField" class="extype">StructField</span>]</span></span><p class="shortcomment cmt">Ordering function for spark schema.</p></li><li class="indented0 " name="dct.spark.SparkPGSQLUtils" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="SparkPGSQLUtils" class="anchorToMember"></a><a id="SparkPGSQLUtils:SparkPGSQLUtils" class="anchorToMember"></a> <span class="permalink"><a href="../../dct/spark/SparkPGSQLUtils$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="SparkPGSQLUtils$.html" title="Postgres SQl utility methods to create, alter and drop objects in database."><span class="name">SparkPGSQLUtils</span></a><span class="result"> extends <a href="package$$Logger.html" name="dct.spark.Logger" id="dct.spark.Logger" class="extype">Logger</a></span></span><p class="shortcomment cmt">Postgres SQl utility methods to create, alter and drop objects in database.</p><div class="fullcomment"><div class="comment cmt"><p>Postgres SQl utility methods to create, alter and drop objects in database.
Re-uses spark internal utilities for critical and sensitive operations like type conversion.
</p></div></div></li></ol></div></div><div id="inheritedMembers"><div name="scala.AnyRef" class="parent"><h3>Inherited from <span name="scala.AnyRef" class="extype">AnyRef</span></h3></div><div name="scala.Any" class="parent"><h3>Inherited from <span name="scala.Any" class="extype">Any</span></h3></div></div><div id="groupedMembers"><div name="Ungrouped" class="group"><h3>Ungrouped</h3></div></div></div><div id="tooltip"></div><div id="footer"></div></body></div></div></div></body></html>
